{"title":"Nginx configuration reverse proxy","uid":"ad62b7b2db278b5d844988a21853a6cb","slug":"001","date":"2020-09-02T00:00:00.000Z","updated":"2021-04-09T09:07:26.445Z","comments":true,"path":"api/articles/001.json","keywords":null,"cover":"https://vanseodesign.com/blog/wp-content/uploads/2018/01/nginx-logo.png","content":"<h2 id=\"Reverse-proxy\"><a href=\"#Reverse-proxy\" class=\"headerlink\" title=\"Reverse proxy\"></a>Reverse proxy</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">#PROXY-START&#x2F;\nlocation  ~* \\.(php|jsp|cgi|asp|aspx)$\n&#123;\n    proxy_pass https:&#x2F;&#x2F;clrs.me;\n    proxy_set_header Host clrs.me;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header REMOTE-HOST $remote_addr;\n    proxy_ssl_name clrs.me;\n\tproxy_ssl_server_name on;\n    proxy_connect_timeout 300s;\n\tproxy_send_timeout 300s;\n\tproxy_read_timeout 300s;\n&#125;\n\nlocation &#x2F;\n&#123;\n    proxy_pass https:&#x2F;&#x2F;clrs.me;\n    proxy_set_header Host clrs.me;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header REMOTE-HOST $remote_addr;\n     proxy_ssl_name clrs.me;\n\tproxy_ssl_server_name on;\n    add_header X-Cache $upstream_cache_status;\n    proxy_connect_timeout 300s;\n\tproxy_send_timeout 300s;\n\tproxy_read_timeout 300s;\n    #Set Nginx Cache\n    \n    \tadd_header Cache-Control no-cache;\n    expires 12h;\n&#125;\n\n#PROXY-END&#x2F;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"Reverse-proxy-restricted-path\"><a href=\"#Reverse-proxy-restricted-path\" class=\"headerlink\" title=\"Reverse proxy restricted path\"></a>Reverse proxy restricted path</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">#PROXY-START&#x2F;\nlocation  ~* \\.(php|jsp|cgi|asp|aspx)$\n&#123;\n    proxy_pass https:&#x2F;&#x2F;clrs.me;\n    proxy_set_header Host clrs.me;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header REMOTE-HOST $remote_addr;\n    proxy_ssl_name clrs.me;\n\tproxy_ssl_server_name on;\n&#125;\n#according to routing config\nlocation &#x2F;3rd&#x2F;pay\n&#123;\n    proxy_pass https:&#x2F;&#x2F;clrs.me;\n    proxy_set_header Host clrs.me;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header REMOTE-HOST $remote_addr;\n    proxy_ssl_name clrs.me;\n\tproxy_ssl_server_name on;\n    add_header X-Cache $upstream_cache_status;\n    \n    #Set Nginx Cache\n    \n    add_header Cache-Control no-cache;\n    expires 12h;\n&#125;\n\n#Match multiple routes\nlocation ~* &#x2F;3rd&#x2F;(outtime|save).html\n&#123;\n    proxy_pass https:&#x2F;&#x2F;clrs.me;\n    proxy_set_header Host clrs.me;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header REMOTE-HOST $remote_addr;\n    proxy_ssl_name clrs.me;\n\tproxy_ssl_server_name on;\n    add_header X-Cache $upstream_cache_status;\n    \n    #Set Nginx Cache\n    \n    add_header Cache-Control no-cache;\n    expires 12h;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","feature":null,"text":"Reverse proxy#PROXY-START&#x2F; location ~* \\.(php|jsp|cgi|asp|aspx)$ &#123; proxy_pass https:&#x2F;&#x2F;clrs.me; proxy_set_header Host clr...","link":"","photos":[],"count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"categories":[{"name":"Server","slug":"Server","count":2,"path":"api/categories/Server.json"}],"tags":[{"name":"Nginx","slug":"Nginx","count":2,"path":"api/tags/Nginx.json"},{"name":"Proxy","slug":"Proxy","count":1,"path":"api/tags/Proxy.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Reverse-proxy\"><span class=\"toc-text\">Reverse proxy</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Reverse-proxy-restricted-path\"><span class=\"toc-text\">Reverse proxy restricted path</span></a></li></ol>","author":{"name":"Clrs","slug":"blog-author","avatar":"/images/icons/favicon.png","link":"","description":"Live & Learn <br />","socials":{"github":"https://github.com/clrsdream","twitter":"https://twitter.com/clrsdream","stackoverflow":"https://stackoverflow.com/users/14146910/clrsdream?tab=profile","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":""}},"mapped":true,"prev_post":{"title":"php using regx to replace domain","uid":"8ee74e47ae2449412f3176de38758dda","slug":"003","date":"2020-09-02T14:53:46.000Z","updated":"2021-04-09T09:07:26.445Z","comments":true,"path":"api/articles/003.json","keywords":null,"cover":"https://i.ytimg.com/vi/wCZ5TJCBWMg/maxresdefault.jpg","text":"use regx replace ‘https://www.clrs.me/abc/index&#39; to ‘https://www.muker.club/abc/index&#39; $a &#x3D; preg_replace(&#39;&#x2F;(https):\\&#...","link":"","photos":[],"count_time":{"symbolsCount":336,"symbolsTime":"1 mins."},"categories":[{"name":"Backend","slug":"Backend","count":1,"path":"api/categories/Backend.json"}],"tags":[{"name":"PHP","slug":"PHP","count":1,"path":"api/tags/PHP.json"}],"author":{"name":"Clrs","slug":"blog-author","avatar":"/images/icons/favicon.png","link":"","description":"Live & Learn <br />","socials":{"github":"https://github.com/clrsdream","twitter":"https://twitter.com/clrsdream","stackoverflow":"https://stackoverflow.com/users/14146910/clrsdream?tab=profile","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":""}}},"next_post":{}}